
version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.7
    commands:
      - apt-get update
      - echo Installing hugo, jq
      #- sudo apt-get install hugo
      - curl -L -o hugo.deb https://github.com/gohugoio/hugo/releases/download/v0.40.1/hugo_0.40.1_Linux-64bit.deb
      - dpkg -i hugo.deb
      - hugo version
      - apt-get install jq
  pre_build:
    commands:
      - echo In pre_build phase..
      - echo Current directory is $CODEBUILD_SRC_DIR
      - ls -la
  build:
    commands:
      - hugo -v
  post_build:
    commands:
      - echo Publish changes to S3 bucket..
      #- aws s3 sync --acl "public-read" --sse "AES256" public/ s3://cfnworkshop.awsia --delete --region us-east-1
artifacts:
  files:
    - 'public/**/*'